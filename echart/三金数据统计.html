<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <script src="jquery-2.1.3.min.js"></script>
    <!-- 引入 echarts.js -->
    <script src="./js/echarts.min.js"></script>
</head>

<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 1200px;height:800px;"></div>
    <script type="text/javascript" src="./data/order.json"></script>

    <script type="text/javascript">
    myChart = echarts.init(document.getElementById('main'));
    var legend_names = []
    var data = []
    var xaxis_data = order_data['xaxis']
    order_data['data'].forEach(function(v) {
        legend_names.push(v['name']);
        data.push({
            name: v['name'],
            type: 'bar',
            stack: 'all',
            label: {
                normal: {
                    show: true,
                    position: "insideLeft"
                }
            },
            // itemStyle:{
            //     color:"#FF0000"
            // },
            data: v['data']
        })
    });

    option = {
        tooltip: {
            trigger: 'axis',
            axisPointer: { // 坐标轴指示器，坐标轴触发有效
                type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
            },
            formatter:function(item){
   
                var total = 0
                var temp = ""
                item.forEach(function(v){
                    temp +=  v['marker'] + v['seriesName'] 
                    + "：" + v['value'] +"</br>"
                    total += v['value']
                })
                temp = item[0]['name'] + "</br>" + `总计：${total}</br>` + temp

                return temp
            }
        },
        legend: {
            data:legend_names
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            type: 'category',
            data: xaxis_data

        },
        yAxis: {
            type: 'value'
        },
        series: data
    };
    myChart.setOption(option)
    </script>
</body>

</html>